<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buyer List</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>buyer List</h1>
    <form id="buyer" onsubmit="return false;">
        <div>
            <span>buyer : </span>
            <input type="text" id="buyer" name="buyer"/>
        </div>
        
        <div>
            <button onclick="getBuyerList(this.form)">Search</button>
        </div>
    </form>
    
    <div id="buyerList"></ul> <!-- 데이터를 표시할 목록 -->
        <div id="buyerList2"></div>

<script>

function getBuyerList(form){
    let buyer = $('#buyer').val() 
    let formData = new FormData();
    formData.append("buyer",buyer);

    let proxyUrl = 'https://cors-anywhere.herokuapp.com/';
    let targetUrl = "https://webtest.u baseinternational.com/hypertexERP/api/profile/buyer/list";
    let url = proxyUrl + targetUrl;

    // let url = "https://webtest.ubaseinternational.com/hypertexERP/api/profile/buyer/list";
    console.log(`>>> formData  : ${formData}`);
    request(url, formData, response)
    
}
function request(url, formData, callbackSuccess, callbackError ){
    
    console.log(`>>> request 함수 안`);
    $.ajax({
        url : url, 
        type : 'POST',
        enctype: 'multipart/form-data',
        acceptCharset: "UTF-8",
        crossDomain: true,
        processData : false,
        contentType : false,
        data : formData,
        dataType : 'json',
        
        success : function(result){
            console.log(result)
            if(callbackSuccess !== undefined){
                callbackSuccess(result);
            } else{}
        },
        error: function(xhr, status, error) {
            
            console.log("error");
        }
    })
}
function response(result){
    console.log(`>>> response 함수 안`);
    filter(result)
}
function filter(result){
    console.log(`>>> filter 함수 안`);
    datapresent(result)
}
function datapresent(result){
    console.log(`>>> datapresent 함수 안`);
    console.log(`>>>  result : ${result}`);

    $
    // table / for / html
    $('#buyerList').html(result)
}


</script>
</body>
</html>